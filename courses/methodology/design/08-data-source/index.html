<!DOCTYPE html>
<html lang="ru" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.75.1" />
    <meta name="description" content="Материалы курсов на кафедре Технологии Программирования. ПМ-ПУ">
<meta name="author" content="Alexander Ulanov">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Источник данных :: Материалы курсов на кафедре Технологии Программирования. ПМ-ПУ</title>

    
    <link href="/css/nucleus.css?1604753431" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1604753431" rel="stylesheet">
    <link href="/css/hybrid.css?1604753431" rel="stylesheet">
    <link href="/css/featherlight.min.css?1604753431" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1604753431" rel="stylesheet">
    <link href="/css/auto-complete.css?1604753431" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1604753431" rel="stylesheet">
    <link href="/css/theme.css?1604753431" rel="stylesheet">
    <link href="/css/hugo-theme.css?1604753431" rel="stylesheet">
    
    <link href="/css/theme-green.css?1604753431" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1604753431"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/courses/methodology/design/08-data-source/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <img src="http://www.apmath.spbu.ru/redesign/v1004/main/assets/images/logo.png" alt="" style="height: 3.57143rem;">
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Поиск...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1604753431"></script>
<script type="text/javascript" src="/js/auto-complete.js?1604753431"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/apmath-spbu.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1604753431"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/courses/" title="Материалы по лекциям на кафедре технологии программирования" class="dd-item 
        parent
        
        
        ">
      <a href="/courses/">
          Материалы по лекциям на кафедре технологии программирования
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/" title="Основы программирования Осень 2020" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/">
          Основы программирования Осень 2020
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/lecture1/" title="Лекция #1" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/lecture1/">
          Лекция #1
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part1/" title="1.1. Введение в программирование" class="dd-item ">
        <a href="/courses/basics/lecture1/part1/">
        1.1. Введение в программирование
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part2/" title="1.2. Введение в языки программирования C и C&#43;&#43;" class="dd-item ">
        <a href="/courses/basics/lecture1/part2/">
        1.2. Введение в языки программирования C и C&#43;&#43;
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part3/" title="1.3. Компиляция" class="dd-item ">
        <a href="/courses/basics/lecture1/part3/">
        1.3. Компиляция
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part4/" title="1.4. Типы данных" class="dd-item ">
        <a href="/courses/basics/lecture1/part4/">
        1.4. Типы данных
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part5/" title="1.5. Переменные" class="dd-item ">
        <a href="/courses/basics/lecture1/part5/">
        1.5. Переменные
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part6/" title="1.6. Инструкции. Условные операторы. Циклы" class="dd-item ">
        <a href="/courses/basics/lecture1/part6/">
        1.6. Инструкции. Условные операторы. Циклы
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part7/" title="1.7. Функции" class="dd-item ">
        <a href="/courses/basics/lecture1/part7/">
        1.7. Функции
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture1/part8/" title="1.8. Макросы. Ввод-вывод" class="dd-item ">
        <a href="/courses/basics/lecture1/part8/">
        1.8. Макросы. Ввод-вывод
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/lecture2/" title="Лекция #2" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/lecture2/">
          Лекция #2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture2/callstack/" title="Стек вызовов" class="dd-item ">
        <a href="/courses/basics/lecture2/callstack/">
        Стек вызовов
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture2/pointers/" title="Указатели" class="dd-item ">
        <a href="/courses/basics/lecture2/pointers/">
        Указатели
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture2/arrays/" title="Массивы" class="dd-item ">
        <a href="/courses/basics/lecture2/arrays/">
        Массивы
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture2/strings/" title="Строки" class="dd-item ">
        <a href="/courses/basics/lecture2/strings/">
        Строки
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture2/vector/" title="Vector" class="dd-item ">
        <a href="/courses/basics/lecture2/vector/">
        Vector
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/lecture3/" title="Лекция #3" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/lecture3/">
          Лекция #3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture3/references/" title="Ссылки" class="dd-item ">
        <a href="/courses/basics/lecture3/references/">
        Ссылки
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture3/dynamic/" title="Диначеская память" class="dd-item ">
        <a href="/courses/basics/lecture3/dynamic/">
        Диначеская память
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture3/multiplearrays/" title="Многомерные массивы" class="dd-item ">
        <a href="/courses/basics/lecture3/multiplearrays/">
        Многомерные массивы
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture3/const/" title="Const" class="dd-item ">
        <a href="/courses/basics/lecture3/const/">
        Const
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/lecture4/" title="Лекция #4" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/lecture4/">
          Лекция #4
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture4/struct/" title="Структура" class="dd-item ">
        <a href="/courses/basics/lecture4/struct/">
        Структура
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture4/incapsulation/" title="Инкапсуляция" class="dd-item ">
        <a href="/courses/basics/lecture4/incapsulation/">
        Инкапсуляция
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture4/mutable/" title="Mutable" class="dd-item ">
        <a href="/courses/basics/lecture4/mutable/">
        Mutable
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture4/this/" title="this" class="dd-item ">
        <a href="/courses/basics/lecture4/this/">
        this
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture4/constructor/" title="Конструктор" class="dd-item ">
        <a href="/courses/basics/lecture4/constructor/">
        Конструктор
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/lecture5/" title="Лекция #5" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/lecture5/">
          Лекция #5
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/accessmodifier/" title="Модификаторы доступа" class="dd-item ">
        <a href="/courses/basics/lecture5/accessmodifier/">
        Модификаторы доступа
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/polymorphism/" title="Полиморфизм" class="dd-item ">
        <a href="/courses/basics/lecture5/polymorphism/">
        Полиморфизм
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/inheritance/" title="Наследование" class="dd-item ">
        <a href="/courses/basics/lecture5/inheritance/">
        Наследование
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/virtualfunctions/" title="Виртуальные функции" class="dd-item ">
        <a href="/courses/basics/lecture5/virtualfunctions/">
        Виртуальные функции
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/final/" title="Финальные методы и классы" class="dd-item ">
        <a href="/courses/basics/lecture5/final/">
        Финальные методы и классы
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/multipleinheritance/" title="Множественное наследование" class="dd-item ">
        <a href="/courses/basics/lecture5/multipleinheritance/">
        Множественное наследование
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/basics/lecture5/dynamiccast/" title="Динамическая идентификация типов времени выполнения" class="dd-item ">
        <a href="/courses/basics/lecture5/dynamiccast/">
        Динамическая идентификация типов времени выполнения
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/basics/ide/" title="Среда разработки для C&#43;&#43;" class="dd-item 
        
        
        
        ">
      <a href="/courses/basics/ide/">
          Среда разработки для C&#43;&#43;
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/methodology/" title="Совеременные методологии разработки программного обеспечения." class="dd-item 
        parent
        
        
        ">
      <a href="/courses/methodology/">
          Совеременные методологии разработки программного обеспечения.
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/history/" title="История" class="dd-item ">
        <a href="/courses/methodology/history/">
        История
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/sdlc/" title="Жизненный цикл ПО" class="dd-item ">
        <a href="/courses/methodology/sdlc/">
        Жизненный цикл ПО
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/sdm/" title="Модели разработки ПО" class="dd-item ">
        <a href="/courses/methodology/sdm/">
        Модели разработки ПО
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/constructing/" title="Конструирование ПО" class="dd-item ">
        <a href="/courses/methodology/constructing/">
        Конструирование ПО
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/quality/" title="Качество ПО" class="dd-item ">
        <a href="/courses/methodology/quality/">
        Качество ПО
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/git/" title="Git" class="dd-item ">
        <a href="/courses/methodology/git/">
        Git
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/courses/methodology/design/" title="Проектирование информационных систем" class="dd-item 
        parent
        
        
        ">
      <a href="/courses/methodology/design/">
          Проектирование информационных систем
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/00-architecture/" title="Архитектура" class="dd-item ">
        <a href="/courses/methodology/design/00-architecture/">
        Архитектура
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/01-performance/" title="Производительность" class="dd-item ">
        <a href="/courses/methodology/design/01-performance/">
        Производительность
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/02-layering/" title="&#39;Расслоение&#39; системы" class="dd-item ">
        <a href="/courses/methodology/design/02-layering/">
        &#39;Расслоение&#39; системы
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/03-model-layer-evolution/" title="Развитие модели слоев в корпоративных программных приложениях" class="dd-item ">
        <a href="/courses/methodology/design/03-model-layer-evolution/">
        Развитие модели слоев в корпоративных программных приложениях
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/04-three-main-layers/" title="Три основных слоя" class="dd-item ">
        <a href="/courses/methodology/design/04-three-main-layers/">
        Три основных слоя
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/05-where-deploy-layers/" title="Где должны функционировать слои" class="dd-item ">
        <a href="/courses/methodology/design/05-where-deploy-layers/">
        Где должны функционировать слои
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/06-business-logic/" title="Организация бизнес-логики" class="dd-item ">
        <a href="/courses/methodology/design/06-business-logic/">
        Организация бизнес-логики
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/07-service-layer/" title="Уровень служб" class="dd-item ">
        <a href="/courses/methodology/design/07-service-layer/">
        Уровень служб
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/courses/methodology/design/08-data-source/" title="Источник данных" class="dd-item active">
        <a href="/courses/methodology/design/08-data-source/">
        Источник данных
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Очистить историю</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Материалы курсов на кафедре Технологии Программирования. ПМ-ПУ</a> > <a href='/courses/'>Материалы по лекциям на кафедре технологии программирования</a> > <a href='/courses/methodology/'>Совеременные методологии разработки программного обеспечения.</a> > <a href='/courses/methodology/design/'>Проектирование информационных систем</a> > Источник данных
          
        
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#архитектурные-решения">Архитектурные решения</a></li>
    <li><a href="#объектно-ориентированные-субд">ОБъектно-ориентированные СУБД</a></li>
    <li><a href="#функциональные-проблемы">Функциональные проблемы</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Источник данных
            </h1>
          

        


<p>Роль слоя источника данных состоит в том, чтобы обеспечить возможность взаимодействия приложения с различными компонентами инфраструктуры для выполнения необходимых функций. Главная составляющая подобной проблемы связана с поддержкой диалога с базой данных — в большинстве случаев реляционной. Тем не менее на сегодня большую популярность приеобретают и колоночные (и другие объектно-ориентированные) базы данных.</p>
<p>Одной из самых серьезных причин успеха реляционных систем является поддержка ими SQL — наиболее стандартизованного языка коммуникаций с базой данных. Хотя сегодня SQL все более обрастает раздражающе несовместимыми и сложными «улучшениями», поддерживаемыми различными поставщиками СУБД, синтаксис ядра языка, к счастью, остается неизменным и доступным для всех.</p>
<h2 id="архитектурные-решения">Архитектурные решения</h2>
<p>В первую обойму архитектурных решений входят, в частности, и такие, которые оговаривают способы взаимодействия бизнес-логики с базой данных. Выбор, который делается на этом этапе, имеет далеко идущие последствия и отменить его бывает трудно или даже невозможно. Поэтому он заслуживает наиболее тщательного осмысления.</p>
<p>Несмотря на широкую поддержку корпоративными приложениями, использование SQL сопряжено с определенными трудностями. Многие разработчики просто не владеют SQL и потому, пытаясь сформулировать эффективные запросы и команды, сталкиваются с проблемами. Помимо того, все без исключения технологии внедрения предложений SQL в код на языке программирования общего назначения страдают теми или иными изъянами. (Безусловно, было бы лучше осуществлять доступ к содержимому базы данных с помощью неких механизмов уровня языка разработки приложения.) А администраторы баз данных хотели бы уяснить нюансы обработки SQL-выражений, чтобы иметь возможность их оптимизировать.</p>
<p>По этим причинам разумнее обособить код SQL от бизнес-логики, разместив его в специальных классах. Удачный способ организации подобных классов состоит в «копировании» структуры каждой таблицы базы данных в отдельном классе, который формирует <strong>шлюз (Gateway)</strong>, поддерживающий возможности обращения к таблице. Теперь основному коду приложения нет необходимости что-либо «знать» о SQL, а все SQL-операции сосредоточиваются в компактной группе классов.</p>
<p>Существует два основных варианта практического использования типового решения шлюз. Наиболее очевидный — создание экземпляра шлюза для каждой записи, возвращаемой в результате обработки запроса к базе данных. Подобный <strong>шлюз записи данных (Row Data Gateway)</strong> представляет собой модель, естественным образом отображающую объектно-ориентированный стиль восприятия реляционных данных.</p>

<div class="mermaid" align="center">
classDiagram
    class BankAccountGateway
        BankAccountGateway : owner
        BankAccountGateway : balance
</div>

<p>Во многих средах поддерживается модель <strong>множества записей (Record Set)</strong> — одна из основополагающих структур данных, имитирующая табличную форму представления содержимого базы данных. Инструментальными системами предлагаются даже графические интерфейсные элементы, реализующие схему множества записей. С каждой таблицей базы данных следует сопоставить соответствующий объект типа <strong>шлюз таблицы данных (Table Data Gateway)</strong>, который содержит методы активизации запросов, возвращающих множество записей.</p>

<div class="mermaid" align="center">
classDiagram
    class BankAccountGateway
        BankAccountGateway : owner
        BankAccountGateway : balance
        BankAccountGateway : insert(owner, balance)
        BankAccountGateway : update(id, owner, balance)
        BankAccountGateway : delete(id)
        BankAccountGateway : find(id)
        BankAccountGateway : findByOwner(owner)
</div>

<p>При использовании модели <strong>предметной области (DomainModel)</strong> возникают другие альтернативы. В этом контексте уместно применять и шлюз записи данных, и шлюз таблицы данных.</p>
<p>В простых приложениях модель предметной области представляет отнюдь не сложную структуру, которая может содержать по одному классу домена в расчете на каждую таблицу базы данных. Объекты таких классов часто снабжены умеренно сложной бизнес-логикой. В этом случае имеет смысл возложить на каждый из них и ответственность за ввод-вывод данных, что, по существу, равносильно применению решения <strong>активная запись (Active Record)</strong>. Это решение можно воспринимать и так, будто, начав со шлюза записи данных, мы добавили в класс порцию бизнес-логики (может быть, когда обнаружили в нескольких <strong>сценариях транзакции (Transaction Script)</strong> повторяющиеся фрагменты кода).</p>

<div class="mermaid" align="center">
classDiagram
    class Customer {
        load(ResultSet)
        delete(...)
        insert(...)
        update(...)
        checkCredit()
        sendBills(...)
    }

Customer --> CustomerTable
    
</div>

<p>В подобного рода ситуациях дополнительный уровень опосредования, формируемый за счет применения шлюза, не представляет большой ценности. По мере усложнения бизнес-логики и возрастания значимости богатой модели предметной области простые решения типа активная запись начинают сдавать свои позиции. При разнесении бизнес-логики по все более мелким классам взаимно однозначное соответствие между классами домена и таблицами базы данных постепенно теряется. Реляционные базы данных не поддерживают механизм наследования, что затрудняет применение <strong>стратегий (strategies)</strong> и других развитых объектно-ориентированных типовых решений. А когда бизнес-логика становится все более беспорядочной, желательно иметь возможность ее тестирования без необходимости постоянно обращаться к базе данных.</p>
<p>С усложнением модели предметной области все эти обстоятельства вынуждают создавать промежуточные функциональные уровни. Так, решение типа шлюза способно устранить некоторые проблемы, но оно все еще оставляет нас с моделью предметной области, тесно привязанной к схеме базы данных. В результате при переходе от полей шлюза к полям объектов домена приходится выполнять определенные преобразования, которые приводят к усложнению объектов домена.</p>
<p>Более удачный вариант состоит в том, чтобы изолировать модель предметной области от базы данных, возложив на промежуточный слой всю полноту ответственности за отображение объектов домена в таблицы базы данных. Подобный <strong>преобразователь данных (Data Mapper)</strong> обслуживает все операции загрузки и сохранения информации, инициируемые бизнес-логикой, и позволяет независимо варьировать как модель предметной области, так и схему базы данных. Это наиболее сложное из архитектурных решений, обеспечивающих соответствие между объектами приложения и реляционными структурами, но его неоспоримое преимущество заключается в полном обособлении двух слоев.</p>

<div class="mermaid" align="center">
classDiagram

CustomerMapper --> Customer
CustomerMapper --> CustomerTable

    class Customer {        
        checkCredit()
        sendBills(...)
    }
    class CustomerMapper {
        create(...)
        load(...)
        save(...)
    }
    
</div>

<p>Не рекомендую рассматривать шлюз в качестве основного механизма сохранения данных в контексте модели предметной области. Если бизнес-логика действительно проста и степень соответствия между классами и таблицами базы данных высока, удачной альтернативой окажется типовое решение активная запись. Если же вам приходится иметь дело с чем-то более сложным, самым лучшим выбором, вероятнее всего, будет преобразователь данных.</p>
<h2 id="объектно-ориентированные-субд">ОБъектно-ориентированные СУБД</h2>
<p>Еще на заре эпохи объектов многие осознали, что существует фундаментальное расхождение между реляционной и объектной моделями; это послужило стимулом создания объектно-ориентированных СУБД, расширяющих парадигму до аспектов сохранения информации об объектах на дисках. При работе с объектно-ориентированной базой данных вам не нужно заботиться об отображении объектов в реляционные структуры. В вашем распоряжении набор взаимосвязанных объектов, а о том, как и когда их считывать или сохранять, «беспокоится» СУБД. Помимо того, с помощью механизма транзакций вы вправе группировать операции и управлять совместным доступом к объектам. Для программиста все это выглядит так, словно он взаимодействует с неограниченным пространством объектов, размещенных в оперативной памяти.</p>
<p>Главное преимущество объектно-ориентированных баз данных — повышение производительности разработки приложений: хотя какие-либо воспроизводимые тестовые показатели мне не известны, в неформальных беседах постоянно высказываются суждения о том, что затраты на обеспечение соответствия между объектами приложения и реляционными структурами традиционной базы данных составляют приблизительно треть от общей стоимости проекта и не снижаются в течение всего цикла сопровождения системы.</p>
<h2 id="функциональные-проблемы">Функциональные проблемы</h2>
<p>Здесь и ниже, употребляя слово <strong>таблица (table)</strong>, будем иметь в виду, что обсуждаемые приемы и решения применимы в равной мере ко всем данным, отличающимся табличным характером: к <strong>хранимым процедурам (stored procedures)</strong>, <strong>представлениям (views)</strong>, а также к результатам выполнения «традиционных» запросов и хранимых процедур. К сожалению, какой-либо общий термин, который охватывал бы все эти понятия, отсутствует. (Под представлением подразумевается <strong>виртуальная таблица (virtual table)</strong> — то же толкование принято и в SQL; запросы к обычным и виртуальным таблицам обладают одним и тем же синтаксисом.)</p>
<p>Операции <strong>обновления (update)</strong> содержимого источников, не являющихся хранимыми таблицами, очевидно, более сложны, поскольку представление далеко не всегда можно модифицировать напрямую — вместо этого приходится манипулировать таблицами, на основе которых оно создано. В этом случае инкапсуляция представления/запроса с помощью подходящего типового решения — хороший способ сосредоточить логику операций обновления в одном месте, что делает использование виртуальных структур более простым и безопасным.</p>
<p>Впрочем, проблемы все еще остаются. Непонимание природы формирования виртуальных таблиц приводит к несогласованности операций: если последовательно выполнить операции обновления двух различных структур, построенных на основе одних и тех же хранимых таблиц, вторая операция способна повлиять на результаты первой. Конечно, в логике обновления можно предусмотреть соответствующие проверки, направленные на то, чтобы избежать возникновения подобных эффектов, но какую цену за все это придется заплатить?</p>
<p>Рассмотрим вопрос о том, как обеспечить загрузку различных объектов и сохранение их в базе данных. На первый взгляд это не кажется слишком сложной задачей: объект можно снабдить соответствующими методами <strong>загрузки (load)</strong> и <strong>сохранения (save)</strong>. Именно такой путь целесообразно избрать, например, при использовании решения активная запись (Active Record).</p>
<p>Загружая в память большое количество объектов и модифицируя их, система должна следить за тем, какие объекты подверглись изменению, и гарантировать сохранение их содержимого в базе данных. Если речь идет всего о нескольких записях, это просто. Но по мере увеличения числа объектов растут и проблемы: как быть, скажем, в такой далеко не самой сложной ситуации, когда необходимо создать записи, которые должны ссылаться на ключевые значения друг друга?</p>
<p>При выполнении операций считывания или изменения объектов система должна гарантировать, что состояние базы данных, с которым вы имеете дело, остается согласованным. Так, например, на результат загрузки данных не должны влиять изменения, вносимые другими процессами. В противном случае итог операции окажется непредсказуемым.</p>
<p>Типовым решением, имеющим существенное значение для преодоления такого рода проблем, является <strong>единица работы (Unit of Work)</strong>, использование которой позволяет отследить, какие объекты считываются и какие модифицируются, и обслужить операции обновления содержимого базы данных. Автору прикладной программы нет нужды явно вызывать методы сохранения — достаточно сообщить объекту Unit of Work о необходимости <strong>фиксации (commit)</strong> результатов в базе данных. Типовое решение единица работы упорядочивает все функции по взаимодействию с базой данных и сосредоточивает в одном месте сложную логику фиксации. Его лучшие качества проявляются именно тогда, когда интерфейс между приложением и базой данных становится особенно запутанным.</p>
<p>Решение Unit of Work удобно воспринимать в виде объекта, действующего как контроллер процессов отображения объектов в реляционные структуры. В отсутствие такового роль контроллера, принимающего решения о том, когда и как загружать и сохранять объекты приложения, обычно выполняет слой бизнес-логики.</p>
<p>В процессе загрузки данных необходимо тщательно следить за тем, чтобы ни один из объектов не был считан дважды, иначе в памяти будут созданы два объекта, соответствующих одной и той же записи таблицы базы данных. Попробуйте обновить каждую из них, и неприятности не заставят себя ждать. Чтобы уйти от проблем, необходимо вести учет каждой считанной записи, а поможет в этом типовое решение <strong>коллекция объектов (Identity Map)</strong>. Каждый раз при необходимости считывания порции данных вначале следует проверить, не содержится ли она в коллекции объектов. Если информация уже загружалась, можно предусмотреть возврат ссылки на нее. В этом случае любые попытки изменения данных будут скоординированы. Еще одно преимущество — возможность избежать дополнительного обращения к базе данных, поскольку коллекция объектов действует как кэш-память. Не забывайте, однако, что главное назначение коллекции объектов — учет идентификационных номеров объектов, а не повышение производительности приложения.</p>
<p>При использовании <strong>модели предметной области (Domain Model)</strong> связанные объекты загружаются совместно таким образом, что операция считывания одного объекта инициирует загрузку другого. Если связями охвачено много объектов, считывание любого из них приводит к необходимости загружать из базы данных целый граф объектов. Чтобы исключить подобное неэффективное поведение системы, необходимо умерить аппетит, сократив количество загружаемых объектов, но оставить за собой право завершения операции, если потребность в дополнительной информации действительно возникнет. Типовое решение <strong>загрузка по требованию (Lazy Load)</strong> предполагает использование специальных меток вместо ссылок на реальные объекты. Существует несколько вариаций схемы, но во всех случаях реальный объект загружается только тогда, когда предпринимается попытка проследовать по ссылке, которая его адресует. Решение загрузка по требованию позволяет оптимизировать число обращений к базе данных.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/courses/methodology/design/07-service-layer/" title="Уровень служб"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/courses/methodology/design/00-architecture/" title="Архитектура" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1604753431"></script>
    <script src="/js/perfect-scrollbar.min.js?1604753431"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1604753431"></script>
    <script src="/js/jquery.sticky.js?1604753431"></script>
    <script src="/js/featherlight.min.js?1604753431"></script>
    <script src="/js/highlight.pack.js?1604753431"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1604753431"></script>
    <script src="/js/learn.js?1604753431"></script>
    <script src="/js/hugo-learn.js?1604753431"></script>
    
        
            <script src="/mermaid/mermaid.js?1604753431"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179019749-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-179019749-1');
</script>
  </body>
</html>

